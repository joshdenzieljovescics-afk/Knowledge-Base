<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36" version="29.1.1">
  <diagram name="Authentication Flow" id="authentication-flow">
    <mxGraphModel dx="2084" dy="1054" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1300" pageHeight="1600" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="user" parent="1" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" value="User" vertex="1">
          <mxGeometry height="60" width="30" x="80" y="80" as="geometry" />
        </mxCell>
        <mxCell id="user-line" edge="1" parent="1" style="endArrow=none;dashed=1;html=1;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="95" y="1500" as="sourcePoint" />
            <mxPoint x="95" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="frontend" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="Frontend" vertex="1">
          <mxGeometry height="40" width="120" x="220" y="80" as="geometry" />
        </mxCell>
        <mxCell id="frontend-line" edge="1" parent="1" style="endArrow=none;dashed=1;html=1;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="280" y="1500" as="sourcePoint" />
            <mxPoint x="280" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="auth-server" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="Auth Server" vertex="1">
          <mxGeometry height="40" width="120" x="420" y="80" as="geometry" />
        </mxCell>
        <mxCell id="auth-server-line" edge="1" parent="1" style="endArrow=none;dashed=1;html=1;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="480" y="1500" as="sourcePoint" />
            <mxPoint x="480" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="chat-routes" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="Chat Routes" vertex="1">
          <mxGeometry height="40" width="120" x="620" y="80" as="geometry" />
        </mxCell>
        <mxCell id="chat-routes-line" edge="1" parent="1" style="endArrow=none;dashed=1;html=1;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="680" y="1500" as="sourcePoint" />
            <mxPoint x="680" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jwt-middleware" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="JWT&#xa;Middleware" vertex="1">
          <mxGeometry height="40" width="120" x="820" y="80" as="geometry" />
        </mxCell>
        <mxCell id="jwt-middleware-line" edge="1" parent="1" style="endArrow=none;dashed=1;html=1;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="880" y="1500" as="sourcePoint" />
            <mxPoint x="880" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg1" edge="1" parent="1" style="endArrow=classic;html=1;" value="Login">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="95" y="200" as="sourcePoint" />
            <mxPoint x="280" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg2" edge="1" parent="1" style="endArrow=classic;html=1;" value="POST /auth/login">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="280" y="240" as="sourcePoint" />
            <mxPoint x="680" y="240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg3" edge="1" parent="1" style="endArrow=classic;html=1;dashed=1;" value="JWT token">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="680" y="280" as="sourcePoint" />
            <mxPoint x="280" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg4" edge="1" parent="1" style="endArrow=classic;html=1;dashed=1;" value="Store in localStorage">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="280" y="320" as="sourcePoint" />
            <mxPoint x="95" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg5" edge="1" parent="1" style="endArrow=classic;html=1;" value="Access Chat">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="95" y="410" as="sourcePoint" />
            <mxPoint x="280" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg6" edge="1" parent="1" style="endArrow=classic;html=1;fontSize=10" value="POST /chat/message&#xa;Authorization: Bearer token">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="280" y="450" as="sourcePoint" />
            <mxPoint x="680" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg7" edge="1" parent="1" style="endArrow=classic;html=1;" value="Verify JWT">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="680" y="490" as="sourcePoint" />
            <mxPoint x="880" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg8" edge="1" parent="1" style="endArrow=classic;html=1;dashed=1;" value="current_user">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="880" y="600" as="sourcePoint" />
            <mxPoint x="680" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg10" edge="1" parent="1" style="endArrow=classic;html=1;dashed=1;" value="Response">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="680" y="670" as="sourcePoint" />
            <mxPoint x="280" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg11" edge="1" parent="1" style="endArrow=classic;html=1;dashed=1;" value="200 OK">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="280" y="710" as="sourcePoint" />
            <mxPoint x="95" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg13" edge="1" parent="1" style="endArrow=classic;html=1;" value="Request (expired token)">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="280" y="870" as="sourcePoint" />
            <mxPoint x="680" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg14" edge="1" parent="1" style="endArrow=classic;html=1;" value="Verify JWT">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="680" y="910" as="sourcePoint" />
            <mxPoint x="880" y="910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg15" edge="1" parent="1" style="endArrow=classic;html=1;strokeWidth=2;dashed=1;" value="401 Error (Expired)">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="880" y="950" as="sourcePoint" />
            <mxPoint x="680" y="950" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg16" edge="1" parent="1" style="endArrow=classic;html=1;strokeWidth=2;dashed=1;" value="401 Unauthorized">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="680" y="990" as="sourcePoint" />
            <mxPoint x="280" y="990" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg17" edge="1" parent="1" style="endArrow=classic;html=1;strokeWidth=2;dashed=1;" value="Redirect to login">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="280" y="1030" as="sourcePoint" />
            <mxPoint x="95" y="1030" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
